[{"content":"Overview You are here for a reason\nYou want to self host your own site but you don\u0026rsquo;t have a public IP and you can\u0026rsquo;t pay your ISP for one because you\u0026rsquo;re poor. Requirements: Nodejs (v16x)\nNGIX\nUbuntu 20.04\nMySQL\nCloudflare account.\nDomain name.\nCloudflared tunnel service.\nGhost\nCertbot\nnotice: If you doing in on a old machine keep in mind that you might have a bunch of error and crashes one of them its explained at the end.\nFIRST THING 1 2 sudo apt update sudo apt upgrade INSTALLING NGINX 1 sudo apt install nginx Once is installed sometimes it doesn\u0026rsquo;t automatically run NGINX so lets check if its running if not lets enable it\n1 2 3 4 5 # to check if its running run sudo systemctl status nginx # if the output doesn\u0026#39;t say its running run sudo systemctl start nginx INSTALLING NODEJS sudo apt-get install nodejs doesn\u0026rsquo;t install out of the box the supported version for Ghost so don\u0026rsquo;t do it before running the following command.\n1 2 curl -sL https://deb.nodesource.com/setup_16.x | sudo -E bash sudo apt install -y nodejs You can also install it with nvm .\nInstall nvm if you don\u0026rsquo;t have it :\n1 curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash after you have it installed you can now install nodejs by running:\n1 2 3 4 5 6 nvm install --lts # installs the supported version # It automatically changes to the version you installed # if you want to check the installed version run nvm ls # and itll show you current installed versions and the one # is in use. If by the time you are doing this the LTS of nodejs changed or the one supported in Ghost you can do:\n1 2 3 4 5 nvm ls-remote # it\u0026#39;ll show you all the node versions available # Select the one that ghost supports nvm install v16.5.1 # change the version to the one you want # and nvm use v16.5.1 # again type the one you just installed INSTALLING MYSQL To install it run the following:\n1 sudo apt install mysql-server Set up MySQL user that Ghost is going to use Enter MySQL:\n1 2 sudo mysql -u root -p # It\u0026#39;ll prompt you to enter your root password Now update the user with this command. Make sure to replace password with your own secure password KEEP THE QUOTE MARKS\n1 ALTER USER \u0026#39;root\u0026#39;@\u0026#39;localhost\u0026#39; IDENTIFIED WITH mysql_native_password BY \u0026#39;password\u0026#39;; Doing so it should prompt you with the following:\n1 Query OK, 0 rows affected (0.18 sec) The password and user are all set up now you can exit MySQL\n1 quit or \\q INSTALLING GHOST-CLI AND SETTING GHOST FOLDER To install Ghost-CLI do :\n1 sudo npm install ghost-cli@latest --location=global For now lets set up where our Ghost site its going to be installed\nCreate the folder inside the /var/www path. you can install it wherever you want but this is the preferred path so NGINX can detect your Ghost site.\n1 sudo mkdir -p /var/www/your-site-name Give the folder the proper permissions to your user :\n1 sudo chown $USER:$USER /var/www/your-folder-site-name 1 sudo chmod 775 /var/www/your-folder-site-name INSTALL GHOST Move to the folder where your Ghost site it\u0026rsquo;s going to be installed\n1 cd /var/www/your-folder-site-name Once you are inside the folder type :\n1 ghost install Let it run and when itll prompt you with:\n1 2 3 4 5 6 7 8 9 10 11 Enter your blog URL: # put your domain name don\u0026#39;t use localhost unless your installing in development mode Enter your MySQL hostname: #keep it in localhost so just press enter Enter your MySQL username: root # if you used a different user change it to it. Enter your MySQL password: # use the same password you put when we set upt mysql Enter your Ghost database name: # just press enter Setting up \u0026#34;ghost\u0026#34; system user ? Do you wish to set up \u0026#34;ghost\u0026#34; mysql user? (Y/n) : Y Do you wish to set up Nginx? (Y/n) : Y # so it automatically creates the nginx config files Setting up SSL : # press no since we are gonna add manually the certificates to the config file later Setting up Systemd: # press yes if you want your site to run on boot Do you want to start Ghost?: N #press no since we need to set up more things before we run the site SETTING UP CERTBOT AND LETSENCRYPT CERTIFICATES If your Ubuntu installation comes with a certbot package preinstalled you might need to remove before doing this\n1 sudo apt-get remove certbot Execute the following to make sure you have the latest version of snapd installed\n1 sudo snap install core; sudo snap refresh core Installing CERTBOT 1 sudo snap install --classic certbot Make the command available Execute the following instruction on the command line on the machine to ensure that the certbot command can be run.\n1 sudo ln -s /snap/bin/certbot /usr/bin/certbot Installing NGINX and CLOUDFLARE plugins Installing NGINX plugin In order to automatically put the certificates in the site config file we must need nginx certbot plugin, so to install it run :\n1 sudo apt install certbot python3-certbot-nginx Installing and setting up cloudflare plugin And since where we installing the site the IP isn\u0026rsquo;t a public one we need to get the certificates by doing dns challenges to cloudflare so lets install the certbot plugin first :\n1 sudo apt install certbot python3-certbot-dns-cloudflare Generate an API token for CloudFlare At this point im assuming you have already added your domain name to Cloudflare as your DNS provide.\nNavigate to Cloudflare | Web Performance \u0026amp; Security Next to \u0026ldquo;Global API Key\u0026rdquo;, click \u0026ldquo;View\u0026rdquo;. Copy the token that\u0026rsquo;s shown. We will need this token in the next step. Store the CloudFlare API token on the server Create a file to hold your secret API key like this:\n1 2 3 4 5 6 7 # create the folder where the file its going to be stored sudo mkdir -p /etc/letsencrypt/secrets # create the file sudo touch /etc/letsencrytp/secrets/cloudflare.ini # give the file the permissions sudo chown root:root /etc/letsencrypt/cloudflare.ini sudo chmod 600 /etc/letsencrypt/cloudflare.ini The insert your API details:\n1 sudo nano /etc/letsencrypt/secrets/cloudflare.ini Put your Cloudfalre account email and API key that you got from the previous step:\n1 2 3 # Cloudflare API credentials used by Certbot dns_cloudflare_email = # the email you use to login to cloudflare dns_cloudflare_api_key = # the API you got before Request your certificate with certbot 1 sudo certbot certonly --dns-cloudflare --dns-cloudflare-credentials /etc/letsencrypt/secrets/cloudflare.ini Enter the email you are going to be using for the renewal notifications and accept the ToS then add the domain you want to get the certificates for (the one you are going to use for the ghost site).\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 Enter email address (used for urgent renewal and security notices) (Enter \u0026#39;c\u0026#39; to cancel): # your email here - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Please read the Terms of Service at https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf. You must agree in order to register with the ACME server at https://acme-v02.api.letsencrypt.org/directory - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - (A)gree/(C)ancel: a - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Would you be willing to share your email address with the Electronic Frontier Foundation, a founding partner of the Let\u0026#39;s Encrypt project and the non-profit organization that develops Certbot? We\u0026#39;d like to send you email about our work encrypting the web, EFF news, campaigns, and ways to support digital freedom. - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - (Y)es/(N)o: n Please enter in your domain name(s) (comma and/or space separated) (Enter \u0026#39;c\u0026#39; to cancel): your-site-domain Obtaining a new certificate Performing the following challenges: dns-01 challenge for your-site-domain Waiting 10 seconds for DNS changes to propagate Waiting for verification... Cleaning up challenges IMPORTANT NOTES: - Congratulations! Your certificate and chain have been saved at: /etc/letsencrypt/live/your-site-domain/fullchain.pem Your key file has been saved at: /etc/letsencrypt/live/your-site-domain/privkey.pem Your cert will expire on 2022-09-11. To obtain a new or tweaked version of this certificate in the future, simply run certbot again. To non-interactively renew *all* of your certificates, run \u0026#34;certbot renew\u0026#34; - Your account credentials have been saved in your Certbot configuration directory at /etc/letsencrypt. You should make a secure backup of this folder now. This configuration directory will also contain certificates and private keys obtained by Certbot so making regular backups of this folder is ideal. - If you like Certbot, please consider supporting our work by: Donating to ISRG / Let\u0026#39;s Encrypt: https://letsencrypt.org/donate Donating to EFF: https://eff.org/donate-le Telling CERTBOT to add the certificates to the nginx config file of your site. To make certbot add them automatically run :\n1 sudo certbot --nginx If after running the commad you get this error :\n1 2 3 Plugins selected: Authenticator nginx, Installer nginx No names were found in your configuration files. Please enter in your domain name(s) (comma and/or space separated) (Enter \u0026#39;c\u0026#39; to cancel): Theres a reason why, as you can read Certbot is not capable of detecting the conf of your site that Ghost automatically added to sites-available and Certbot is looking for a conf file with a domain name .\nSo a way to fix this is modify the nginx,conf file and include the path to sites-enabled\n1 2 # modify the nginx.conf file sudo nano /etc/nginx/nginx.conf And add the following line inside the http {}block\n1 include /etc/nginx/sites-enabled/*; Save it and reload NGINX.\n1 sudo systemctl reload nginx So now if we run the Certbotcommand we should get the following:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 # command to put the certificates in the conf file sudo certbot --nginx # Output prompt Plugins selected: Authenticator nginx, Installer nginx Which names would you like to activate HTTPS for? - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 1: yourdomainname - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Select the appropriate numbers separated by commas and/or spaces, or leave input blank to select all options shown (Enter \u0026#39;c\u0026#39; to cancel): 1 Cert not yet due for renewal You have an existing certificate that has exactly the same domains or certificate name you requested and isn\u0026#39;t close to expiry. (ref: /etc/letsencrypt/renewal/yoursite.conf) What would you like to do? - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 1: Attempt to reinstall this existing certificate 2: Renew \u0026amp; replace the cert (limit ~5 per 7 days) - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Select the appropriate number [1-2] then [enter] (press \u0026#39;c\u0026#39; to cancel): 1 Keeping the existing certificate Deploying Certificate to VirtualHost /etc/nginx/conf.d/yoursite.conf Please choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access. - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 1: No redirect - Make no further changes to the webserver configuration. 2: Redirect - Make all requests redirect to secure HTTPS access. Choose this for new sites, or if you\u0026#39;re confident your site works on HTTPS. You can undo this change by editing your web server\u0026#39;s configuration. - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Select the appropriate number [1-2] then [enter] (press \u0026#39;c\u0026#39; to cancel): 2 Redirecting all traffic on port 80 to ssl in /etc/nginx/conf.d/yoursite.conf - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - Congratulations! You have successfully enabled https://yourdomainname You should test your configuration at: https://www.ssllabs.com/ssltest/analyze.html?d=yourdomain If you check your siteconf file the certificates should be applied and all the extra configuration too.\nFor more information on how to renew the type certbot --help or type sudo certbot renew this wil renew all your certificates so if you have multiple certificates for different domains and you want to renew a specific one run certbot certonly --force-renew -d yourdomain.com.\nSetting up Cloudflare Tunnel Install the Cloudflared service: NOTE\nA little note on why i don\u0026rsquo;t use the Zero Trust Dashboard and I do this manually.\n1 - Zero Trust dasboard lacks of configuration options compared to when you create the tunnel manually.\nExample:\nIf you install the service and create the tunnel through the Zero Trust Dashboard pointing to localhost:2368 where Ghost server is running and when you the service you are going to encounter into a problem of ERRO_TO_MANY_REDIRECTS after many hours trying to know why was this happening I found out that setting noTLSVerfiy to true the site loads And the only way to do this is when you create the tunnel manually since the Zero Trust Dashboard doesn\u0026rsquo;t have this option.\nFirst you have to switch to the root user\n1 2 # to change to the root user simply type sudo su Once you are in the root user run the following :\n1 wget -q https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb \u0026amp;\u0026amp; dpkg -i cloudflared-linux-amd64.deb This will download the cloudflared package install it.\nAuthenticate cloudflared 1 cloudflared tunnel login Running this command will:\nOpen a browser window and prompt you to log in to your Cloudflare account. After logging in to your account, select your domain.(If after login in it doesn\u0026rsquo;t redirect you the correct page just click on the link that its in your terminal.) Generate an account certificate, the cert.pem file, in the default cloudflared directory. Creating the tunnel To create the tunnel run :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # Create the tunnel cloudflared tunnel create \u0026lt;NAME\u0026gt; # Running this command will: # 1 - Create a tunnel by establishing a persistent relationship between # the name you provide and a UUID for your tunnel. At this point, # no connection is active within the tunnel yet. # 2 - Generate a tunnel credentials file in the default cloudflared directory. # 3 - Create a subdomain of .cfargotunnel.com. #From the output of the command, take note of the tunnel’s UUID and # the path to your tunnel’s credentials file. # Check that the tunnel was creating cloudflared tunnel list # It\u0026#39;ll prompt you with the tunnels that you have created including # the ones that you created through zero trust dashboard. After creating the tunnel it\u0026rsquo;s time to create the config.yml file inside the .cloudflared folder this is where you tell the tunnel where and what service to look for.\n1 2 3 4 5 6 7 8 9 10 11 12 # move the .cloudflared folder cd ~/.cloudflared # If you LS that directory you will see two files ls cert.pem the-tunnel-you-created-UUID.json # create the config file touch config.yml # Open it and add the following nano config.yml Add the following to the config file\n1 2 3 4 5 6 7 8 9 tunnel: your-tunnel-UUID credentials-file: /home/$USER/.cloudflared/your-tunnel-UUID.json ingress: - hostname: your-domain-name service: https://localhost:443 originRequest: noTLSVerify: true - service: http_status:404 hostname: Here add the domain you are going to use. Make sure is the same you put in your Ghost setup.\nservice: Since we added SSL certificates and NGINX it\u0026rsquo;s in charge of redirecting everything we don\u0026rsquo;t need to put the localhost:2368 where Ghost server is normally running.\noriginRequest:\nnoTLSVerfiy: true # Don\u0026rsquo;t remove this or you are going to get the ERROR_TO_MANY_REDIRECTS error. Route the traffic Now assign a CNAME record that points traffic to your tunnel.\n1 cloudflared tunnel route dns \u0026lt;UUID or NAME\u0026gt; \u0026lt;your-domain\u0026gt; Run the tunnel Run the tunnel to see if it works\n1 2 cloudflared tunnel run \u0026lt;UUID or NAME\u0026gt; # you can stop it by doing ctrl+c If you want to run the tunnel as a service follow Cloudflare\u0026rsquo;s guide Run as a service on Linux · Cloudflare Zero Trust docs. Running GHOST If you added Ghost to systemd, all you have to do is start your service\n1 2 3 4 5 # The name of the service might be different so look for it in # /etc/systemd/system/ or /lib/systemd/systemd/ sudo systemctl start ghost_yourdomain # you can also stop/disable/enable # or sudo service ghost_yourdomain start # you can also stop/disable/enable But if you want to run it and see if everything is working properly move to where you have installed it\n1 cd /var/www/yoursite And run ghost with :\n1 ghost run This will launch ghost in debug mode and you will be able to see where it fails. To end the process simply do ctrl + c.\nKnown issues If you are running Ghost on an older PC its probably that at the moment you want to upload any image (profile picture or post image) Ghost will silently crash and this is probably because your CPU doesn\u0026rsquo;t support SSE4.2.\nThis due to the sharp dropped support on older CPU that are running below SSE4.2\nSo a Fix is disabling the imageOptimization to do this add the following to your conf.production.json\n1 2 3 4 \u0026#34;imageOptimization\u0026#34;: { \u0026#34;resize\u0026#34;: false, \u0026#34;srcsets\u0026#34;: false } After doing you should be able to upload images to your site BUT since you disabled imageOptimization ghost is going to crash after you upload the Publication cover image so keep in mind that.\n","date":"2022-06-15T00:00:00Z","image":"/ko/p/how-to-install-host-ghost-with-cloudflare-argo-tunnel/cloudflared-ghost_hu7136eeb6509210a4b2b53073df7006c6_75676_120x120_fill_box_smart1_3.png","permalink":"/ko/p/how-to-install-host-ghost-with-cloudflare-argo-tunnel/","title":"How to install \u0026 host Ghost with Cloudflare Argo tunnel"},{"content":"What you need: 1 - OBS studio\n2 - win-capture-audio, this is the program you need to split the audio. You can download it here :\nhttps://github.com/bozbez/win-capture-audio/releases/download/v2.2.2-beta/win-capture-audio-2.2.2-beta-setup.exe\nInstallation and Usage Once you downloaded the program run the installer (make sure OBS is not open) it\u0026rsquo;s a fast installation once it finish you can launch OBS now if you add a new source there should be a new option called Application Audio Output Capture\nAdding the audio sources: Since you can add multiple programs to the same source I recommend creating a source specially for each type of group for example did it like this:\nThe Music - Audio group it\u0026rsquo;s a must since here is where you\u0026rsquo;re going to add the programs that bring music to the stream like Spotify or Google chrome(nightbot/youtube) and its gonna allow to separate it from the VOD audio track.\nAlso to avoid having to add each audio source to different scenes a good trick is creating a new scene and there add all the audio sources groups you\u0026rsquo;re gonna use and once you are done with setting up everything all you have to do is add that scene as a source in the multiple scenes that you use so every time you add a new group of audio sources it automatically adds them to the mixer of each scene.\nAdd your programs: Here you have to ways to add programs/games.\nAdd from currently active sessions menu: In this menu it should give you a list with the most common program. (ex: Discord, Spotify) and some others that the plugin might detect. Once you selected the program just click in the Add Executable. You can add multiple programs as a group to the same audio source. Using the + next to the executables area: If the program you want to add to a certain group of sources doesn\u0026rsquo;t show up in the Session menu you might wanna added the program executable manually. For example if you want to add Google Chrome and it doesn\u0026rsquo;t show up in the list you add it by clicking in the + button and type chrome.exe and press ok and it should be added to the Executables area. IMPORTANT !! : SINCE OBS IS CREATING AUDIO TOO BECAUSE YOU HAVE CLIPS/ALERTS AND SUCH THINGS AS BROWSER SOURCE INSIDE OBS YOU SHOULD ADD OBS ITSELF AS AN AUDIO SOURCE SO VIEWERS GET TO HEAR THEM ON STREAM\nIf the program you want to add doesn\u0026rsquo;t show up in the Session menu and you have to manually add it but you dont know whats the name of the executable you can get it in the task manager in the details tab. (Open it by pressing Windows key + type taksmngr and it should be the first option) there you can see all the programs executable names. (ex: chrome.exe). Most of the time the executable is programname.exe but sometimes its different.(ex: for Apex Legends is r5apex.exe).\nNOTE - League of Legends:\nFor league you have to add two sources LeagueClientUxRender.exe and League of Legends.exe the first one is for the league client audio and the second one is for when youre inside the game audio. Both should automatically appear in the session menu when you open the client and when you get in a game. (you can set up the second by going into a custom game/practice tool).\nTelling Twitch which applications audio you want to get saved in the VOD audio: Inside OBS settings you want to change the Output mode from simple to advanced once you do this you should see the Twitch VOD Track option under the Audio Track select the checkbox and by default it has the track 2 you can leave it as it is or change it, up to you. Just keep in mind that it should not be the same as the Audio Track.\nDisabling audio track : Once you have the option enabled and all your audio sources added the next step disabling the track 2 to the sources that you don\u0026rsquo;t want to be saved in the VOD.\nRemember the Music - Audio source we created before here it\u0026rsquo;s why we need it to be like that.\nFor this you click in the cog wheel of any audio source and go to Advanced Audio Properties.\nThen a new window should pop-up and it should show you all the audio sources and their audio tracks\nSee how we have multiple numbers and check boxes in Tracks. Remember that by default Twitch VOD Track that is selected in Settings is the track 2, since we don\u0026rsquo;t want Twitch to save ourMusic - Audio in the VOD what we do is we uncheck the track 2 from Music - Audio or any other audio source you want to exclude from the VOD.\nNote: Only uncheck the track that you selected as your twitch vod track because if you uncheck any other track not only it wont get recorded in the VOD, viewers won\u0026rsquo;t be able to listen to that source on stream.\nNow from now on your vods should not record any music source.\n","date":"2022-06-11T00:00:00Z","image":"/ko/p/obs-split-audio-guide/obs-studio_hu852487be308eca7c1a54a1172628f88e_105789_120x120_fill_q75_box_smart1.jpeg","permalink":"/ko/p/obs-split-audio-guide/","title":"OBS Split Audio Guide"}]